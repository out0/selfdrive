import numpy as np
import cv2

# Your input list
points_str = ["-90.0000991821289|-0.0008452492766082287|0.028222160413861275|0.00018598794633763798", 
              "-89.45883330476649|-0.0008434922723435291|0.028222160413861275|0.00018598794633763798", 
              "-88.91756742740407|-0.0008417352680788295|0.028222160413861275|0.00018598794633763798", 
              "-88.3763019892927|0.13447649107679144|0.028222160413861275|0.00018598794633763798", 
              "-87.83503655118135|0.2697947174216617|0.028222160413861275|0.00018598794633763798", 
              "-87.29377111307|0.40511294376653195|0.028222160413861275|0.00018598794633763798", 
              "-86.75250611420971|0.6757476394520078|0.028222160413861275|0.00018598794633763798", 
              "-86.21124067609834|0.811065865796878|0.028222160413861275|0.00018598794633763798", 
              "-85.66997523798699|0.9463840921417483|0.028222160413861275|0.00018598794633763798", 
              "-85.26402626921625|1.0817018792355524|0.028222160413861275|0.00018598794633763798", 
              "-84.72276083110488|1.2170201055804226|0.028222160413861275|0.00018598794633763798", 
              "-84.18149539299353|1.352338331925293|0.028222160413861275|0.00018598794633763798", 
              "-83.64022995488217|1.4876565582701633|0.028222160413861275|0.00018598794633763798", 
              "-83.09896451677082|1.6229747846150333|0.028222160413861275|0.00018598794633763798", 
              "-82.5576986394084|1.622976541619298|0.028222160413861275|0.00018598794633763798", 
              "-82.01643276204597|1.6229782986235628|0.028222160413861275|0.00018598794633763798", 
              "-81.47516644543248|1.487663586287222|0.028222160413861275|0.00018598794633763798", 
              "-80.93390012881899|1.352348873950881|0.028222160413861275|0.00018598794633763798", 
              "-80.52794984229504|1.0817172530228685|0.028222160413861275|0.00018598794633763798", 
              "-79.98668352568156|0.9464025406865276|0.028222160413861275|0.00018598794633763798", 
              "-79.98668352568156|0.9464025406865276|0.028222160413861275|0.00018598794633763798", 
              "-79.98668352568156|0.9464025406865276|0.028222160413861275|0.00018598794633763798"]

W = 600
H = 600

# Parse strings into float coordinates
coords = []
for s in points_str:
    x, y, z, h = map(float, s.split("|"))
    coords.append((x, y))
coords = np.array(coords)

# Normalize coordinates to fit 300x300 image
min_x, min_y = coords.min(axis=0)
max_x, max_y = coords.max(axis=0)

scale_x = 0.5 * (W-1) / (max_x - min_x) if max_x != min_x else 1
scale_y = 0.5 * (H-1) / (max_y - min_y) if max_y != min_y else 1
scale = min(scale_x, scale_y)  # Keep aspect ratio

# Transform points to pixel coordinates
pts_scaled = ((coords - [min_x, min_y]) * scale).astype(np.int32)

# Create a blank white image
img = np.ones((H, W, 3), dtype=np.uint8) * 255


highlight_pos = 18

# Draw the connected line
for i in range(len(pts_scaled) - 1):
    if i  == highlight_pos:
        # Highlight the point with a larger circle
        #cv2.circle(img, tuple(pts_scaled[i]), 5, (0, 255, 0), -1)
        cv2.line(img, tuple(pts_scaled[i]), tuple(pts_scaled[i+1]), (255, 0, 0), 1)        
    else:
        cv2.line(img, tuple(pts_scaled[i]), tuple(pts_scaled[i+1]), (0, 0, 255), 1)



# Save the image
cv2.imwrite("points_plot.png", img)

print("Saved as points_plot.png")
